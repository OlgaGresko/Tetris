!function(){function t(t){return t&&t.__esModule?t.default:t}var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},r={},n=e.parcelRequire685b;null==n&&((n=function(t){if(t in i)return i[t].exports;if(t in r){var e=r[t];delete r[t];var n={id:t,exports:{}};return i[t]=n,e.call(n.exports,n,n.exports),n.exports}var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,e){r[t]=e},e.parcelRequire685b=n),n.register("gD1JV",(function(t,e){"use strict";function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t,e){return i(t,e)}})),n.register("ge8co",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t,e,i){return s.apply(null,arguments)};var i,r=(i=n("gD1JV"))&&i.__esModule?i:{default:i};function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(t){return!1}}function s(t,e,i){return(s=o()?Reflect.construct:function(t,e,i){var n=[null];n.push.apply(n,e);var o=new(Function.bind.apply(t,n));return i&&r.default(o,i.prototype),o}).apply(null,arguments)}})),n.register("cZGw3",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t){return-1!==Function.toString.call(t).indexOf("[native code]")}})),n.register("fVNic",(function(t,e){"use strict";function i(t){return(i=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t){return i(t)}})),n.register("aTHs7",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}})),n.register("jmhxu",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t,e){return!e||"object"!==r.default(e)&&"function"!=typeof e?i.default(t):e};var i=o(n("ds8z5")),r=o(n("l5bVx"));function o(t){return t&&t.__esModule?t:{default:t}}})),n.register("ds8z5",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}})),n.register("l5bVx",(function(t,e){"use strict";Object.defineProperty(t.exports,"__esModule",{value:!0}),t.exports.default=function(t){return t&&t.constructor===Symbol?"symbol":typeof t}}));var o={};Object.defineProperty(o,"__esModule",{value:!0}),o.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};var s={};function a(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Object.defineProperty(s,"__esModule",{value:!0}),s.default=function(t,e,i){e&&a(t.prototype,e);i&&a(t,i);return t};var l={};Object.defineProperty(l,"__esModule",{value:!0}),l.default=function(t,e,i){e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i;return t};var c={};Object.defineProperty(c,"__esModule",{value:!0}),c.default=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&h.default(t,e)};var u,h=(u=n("gD1JV"))&&u.__esModule?u:{default:u};var f={};Object.defineProperty(f,"__esModule",{value:!0}),f.default=function(t){return g(t)};var d=_(n("ge8co")),y=_(n("cZGw3")),p=_(n("fVNic")),v=_(n("gD1JV"));function _(t){return t&&t.__esModule?t:{default:t}}function g(t){var e="function"==typeof Map?new Map:void 0;return g=function(t){if(null===t||!y.default(t))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,i)}function i(){return d.default(t,arguments,p.default(this).constructor)}return i.prototype=Object.create(t.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),v.default(i,t)},g(t)}var x={};Object.defineProperty(x,"__esModule",{value:!0}),x.default=function(t){var e=w.default();return function(){var i,r=m.default(t);if(e){var n=m.default(this).constructor;i=Reflect.construct(r,arguments,n)}else i=r.apply(this,arguments);return b.default(this,i)}};var w=k(n("aTHs7")),m=k(n("fVNic")),b=k(n("jmhxu"));function k(t){return t&&t.__esModule?t:{default:t}}var P={},O=function(t){"use strict";var e,i=Object.prototype,r=i.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",s=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function l(t,e,i){return Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,i){return t[e]=i}}function c(t,e,i,r){var n=e&&e.prototype instanceof v?e:v,o=Object.create(n.prototype),s=new L(r||[]);return o._invoke=function(t,e,i){var r=h;return function(n,o){if(r===d)throw new Error("Generator is already running");if(r===y){if("throw"===n)throw o;return j()}for(i.method=n,i.arg=o;;){var s=i.delegate;if(s){var a=O(s,i);if(a){if(a===p)continue;return a}}if("next"===i.method)i.sent=i._sent=i.arg;else if("throw"===i.method){if(r===h)throw r=y,i.arg;i.dispatchException(i.arg)}else"return"===i.method&&i.abrupt("return",i.arg);r=d;var l=u(t,e,i);if("normal"===l.type){if(r=i.done?y:f,l.arg===p)continue;return{value:l.arg,done:i.done}}"throw"===l.type&&(r=y,i.method="throw",i.arg=l.arg)}}}(t,i,s),o}function u(t,e,i){try{return{type:"normal",arg:t.call(e,i)}}catch(t){return{type:"throw",arg:t}}}t.wrap=c;var h="suspendedStart",f="suspendedYield",d="executing",y="completed",p={};function v(){}function _(){}function g(){}var x={};l(x,o,(function(){return this}));var w=Object.getPrototypeOf,m=w&&w(w(T([])));m&&m!==i&&r.call(m,o)&&(x=m);var b=g.prototype=v.prototype=Object.create(x);function k(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function i(n,o,s,a){var l=u(t[n],t,o);if("throw"!==l.type){var c=l.arg,h=c.value;return h&&"object"==typeof h&&r.call(h,"__await")?e.resolve(h.__await).then((function(t){i("next",t,s,a)}),(function(t){i("throw",t,s,a)})):e.resolve(h).then((function(t){c.value=t,s(c)}),(function(t){return i("throw",t,s,a)}))}a(l.arg)}var n;this._invoke=function(t,r){function o(){return new e((function(e,n){i(t,r,e,n)}))}return n=n?n.then(o,o):o()}}function O(t,i){var r=t.iterator[i.method];if(r===e){if(i.delegate=null,"throw"===i.method){if(t.iterator.return&&(i.method="return",i.arg=e,O(t,i),"throw"===i.method))return p;i.method="throw",i.arg=new TypeError("The iterator does not provide a 'throw' method")}return p}var n=u(r,t.iterator,i.arg);if("throw"===n.type)return i.method="throw",i.arg=n.arg,i.delegate=null,p;var o=n.arg;return o?o.done?(i[t.resultName]=o.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=e),i.delegate=null,p):o:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,p)}function S(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function E(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function L(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(S,this),this.reset(!0)}function T(t){if(t){var i=t[o];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,s=function i(){for(;++n<t.length;)if(r.call(t,n))return i.value=t[n],i.done=!1,i;return i.value=e,i.done=!0,i};return s.next=s}}return{next:j}}function j(){return{value:e,done:!0}}return _.prototype=g,l(b,"constructor",g),l(g,"constructor",_),_.displayName=l(g,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,l(t,a,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},k(P.prototype),l(P.prototype,s,(function(){return this})),t.AsyncIterator=P,t.async=function(e,i,r,n,o){void 0===o&&(o=Promise);var s=new P(c(e,i,r,n),o);return t.isGeneratorFunction(i)?s:s.next().then((function(t){return t.done?t.value:s.next()}))},k(b),l(b,a,"Generator"),l(b,o,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=[];for(var i in t)e.push(i);return e.reverse(),function i(){for(;e.length;){var r=e.pop();if(r in t)return i.value=r,i.done=!1,i}return i.done=!0,i}},t.values=T,L.prototype={constructor:L,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var i in this)"t"===i.charAt(0)&&r.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var i=this;function n(r,n){return a.type="throw",a.arg=t,i.next=r,n&&(i.method="next",i.arg=e),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],a=s.completion;if("root"===s.tryLoc)return n("end");if(s.tryLoc<=this.prev){var l=r.call(s,"catchLoc"),c=r.call(s,"finallyLoc");if(l&&c){if(this.prev<s.catchLoc)return n(s.catchLoc,!0);if(this.prev<s.finallyLoc)return n(s.finallyLoc)}else if(l){if(this.prev<s.catchLoc)return n(s.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return n(s.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=t,s.arg=e,o?(this.method="next",this.next=o.finallyLoc,p):this.complete(s)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),p},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),E(i),p}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var i=this.tryEntries[e];if(i.tryLoc===t){var r=i.completion;if("throw"===r.type){var n=r.arg;E(i)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,i,r){return this.delegate={iterator:T(t),resultName:i,nextLoc:r},"next"===this.method&&(this.arg=e),p}},t}(P);try{regeneratorRuntime=O}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=O:Function("r","regeneratorRuntime = r")(O)}var S=Symbol.iterator,E=function(e){"use strict";t(c)(r,e);var i=t(x)(r);function r(e,n){var s;t(o)(this,r),(s=i.call(this)).rows=e,s.columns=n;for(var a=0;a<e;a++)s[a]=new Array(n).fill(0);return s}return t(s)(r,[{key:"hasCollision",value:function(t){var e=!0,i=!1,r=void 0;try{for(var n,o=t[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var s=n.value;if(s&&(this._isOutOfBounds(s.x,s.y)||this._isOccupied(s.x,s.y)))return!0}}catch(t){i=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(i)throw r}}return!1}},{key:"lockPiece",value:function(t){var e=!0,i=!1,r=void 0;try{for(var n,o=t[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var s=n.value;s&&(this[s.y][s.x]=s)}}catch(t){i=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(i)throw r}}}},{key:"clearLines",value:function(){var t=this._getLinesToRemove();return this._removeLines(t)}},{key:"reset",value:function(){for(var t=0;t<this.rows;t++)for(var e=0;e<this.columns;e++)this[t][e]=0}},{key:"_getLinesToRemove",value:function(){for(var t=[],e=this.rows-1;e>=0;e--){for(var i=0,r=0;r<this.columns;r++)this[e][r]&&(i+=1);if(0===i)break;i<this.columns||i===this.columns&&t.unshift(e)}return t}},{key:"_removeLines",value:function(t){var e=!0,i=!1,r=void 0;try{for(var n,o=t[Symbol.iterator]();!(e=(n=o.next()).done);e=!0){var s=n.value;this.splice(s,1),this.unshift(new Array(this.columns).fill(0))}}catch(t){i=!0,r=t}finally{try{e||null==o.return||o.return()}finally{if(i)throw r}}return t.length}},{key:"_isOutOfBounds",value:function(t,e){return void 0===this[e]||void 0===this[e][t]}},{key:"_isOccupied",value:function(t,e){return this[e][t]}},{key:S,value:t(P).mark((function e(){var i,r;return t(P).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=0;case 1:if(!(i<this.rows)){t.next=12;break}r=0;case 3:if(!(r<this.columns)){t.next=9;break}return t.next=6,this[i][r];case 6:r++,t.next=3;break;case 9:i++,t.next=1;break;case 12:case"end":return t.stop()}}),e,this)}))}]),r}(t(f)(Array)),L=Symbol.iterator,T=function(){"use strict";function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.getRandomType(),r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(t(o)(this,e),!e.types.includes(i))throw new Error("Invalid peice type");this.type=i,this.blocks=e.blocks[this.type](),this.x=r,this.y=n}return t(s)(e,[{key:"width",get:function(){return this.blocks[0].length}},{key:"height",get:function(){return this.blocks.length}},{key:"rotate",value:function(){for(var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=this.blocks,i=e.length,r=Math.floor(i/2),n=i-1,o=0;o<r;o++)for(var s=o;s<n-o;s++){var a=e[o][s];t?(e[o][s]=e[n-s][o],e[n-s][o]=e[n-o][n-s],e[n-o][n-s]=e[s][n-o],e[s][n-o]=a):(e[o][s]=e[s][n-o],e[s][n-o]=e[n-o][n-s],e[n-o][n-s]=e[n-s][o],e[n-s][o]=a)}}},{key:L,value:t(P).mark((function e(){var i,r;return t(P).wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=0;case 1:if(!(i<this.blocks.length)){t.next=12;break}r=0;case 3:if(!(r<this.blocks[i].length)){t.next=9;break}return t.next=6,1===this.blocks[i][r]?{x:this.x+r,y:this.y+i,type:this.type}:null;case 6:r++,t.next=3;break;case 9:i++,t.next=1;break;case 12:case"end":return t.stop()}}),e,this)}))}],[{key:"types",get:function(){return Object.keys(this.blocks)}},{key:"getRandomType",value:function(){var t=Math.floor(Math.random()*this.types.length);return this.types[t]}}]),e}();t(l)(T,"blocks",{I:function(){return[[0,0,0,0],[1,1,1,1],[0,0,0,0],[0,0,0,0]]},J:function(){return[[0,0,0],[1,1,1],[0,0,1]]},L:function(){return[[0,0,0],[1,1,1],[1,0,0]]},O:function(){return[[0,0,0,0],[0,1,1,0],[0,1,1,0],[0,0,0,0]]},S:function(){return[[0,0,0],[0,1,1],[1,1,0]]},T:function(){return[[0,0,0],[1,1,1],[0,1,0]]},Z:function(){return[[0,0,0],[1,1,0],[0,1,1]]}});var j=function(){"use strict";function e(i,r){t(o)(this,e),t(l)(this,"_score",0),t(l)(this,"_lines",0),t(l)(this,"_topOut",!1),t(l)(this,"_activePiece",null),t(l)(this,"_nextPiece",null),this._playfield=new E(i,r),this._updatePieces()}return t(s)(e,[{key:"level",get:function(){return Math.floor(.1*this._lines)}},{key:"state",get:function(){return{score:this._score,level:this.level,lines:this._lines,playfield:this._playfield,activePiece:this._activePiece,nextPiece:this._nextPiece,isGameOver:this._topOut}}},{key:"reset",value:function(){this._score=0,this._lines=0,this._topOut=!1,this._playfield.reset(),this._updatePieces()}},{key:"movePieceLeft",value:function(){this._activePiece.x-=1,this._playfield.hasCollision(this._activePiece)&&(this._activePiece.x+=1)}},{key:"movePieceRight",value:function(){this._activePiece.x+=1,this._playfield.hasCollision(this._activePiece)&&(this._activePiece.x-=1)}},{key:"movePieceDown",value:function(){this._topOut||(this._activePiece.y+=1,this._playfield.hasCollision(this._activePiece)&&(this._activePiece.y-=1,this._update()))}},{key:"rotatePiece",value:function(){this._activePiece.rotate(),this._playfield.hasCollision(this._activePiece)&&this._activePiece.rotate(!1)}},{key:"_update",value:function(){this._updatePlayfield(),this._updateScore(),this._updatePieces(),this._playfield.hasCollision(this._activePiece)&&(this._topOut=!0)}},{key:"_updatePlayfield",value:function(){this._playfield.lockPiece(this._activePiece)}},{key:"_updateScore",value:function(){var t=this._playfield.clearLines();t>0&&(this._score+=e.points[t]*(this.level+1),this._lines+=t)}},{key:"_updatePieces",value:function(){this._activePiece=this._nextPiece||new T,this._nextPiece=new T,console.log("_updatePieces",this._activePiece,this._nextPiece),this._activePiece.x=Math.floor((this._playfield.columns-this._activePiece.width)/2),this._activePiece.y=-1}}]),e}();t(l)(j,"points",{1:40,2:100,3:300,4:1200});var R=function(){"use strict";function e(i){var r=i.element,n=i.width,s=i.height,a=i.rows,l=i.columns;t(o)(this,e),this.element=r,this.width=n,this.height=s,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.context=this.canvas.getContext("2d"),this.playfieldBorderWidth=4,this.playfieldX=this.playfieldBorderWidth,this.playfieldY=this.playfieldBorderWidth,this.playfieldWidth=2*this.width/3,this.playfieldHeight=this.height,this.playfieldInnerWidth=this.playfieldWidth-2*this.playfieldBorderWidth,this.playfieldInnerHeight=this.playfieldHeight-2*this.playfieldBorderWidth,this.blockWidth=this.playfieldInnerWidth/l,this.blockHeight=this.playfieldInnerHeight/a,this.panelX=this.playfieldWidth+10,this.panelY=0,this.panelWidth=this.width/3,this.panelHeight=this.height,this.element.appendChild(this.canvas)}return t(s)(e,[{key:"on",value:function(t,e){document.addEventListener(t,e)}},{key:"renderStartScreen",value:function(){this.context.fillStyle="white",this.context.font='18px "Press Start 2P"',this.context.textAlign="center",this.context.textBaseline="middle",this.context.fillText("Press ENTER to Start",this.width/2,this.height/2)}},{key:"renderMainScreen",value:function(t){this._clearScreen(),this._renderPlayfield(t),this._renderPanel(t),this._renderBorder()}},{key:"renderPauseScreen",value:function(){this._clearScreen("rgba(0, 0, 0, 0.75)"),this.context.fillStyle="white",this.context.font='16px "Press Start 2P"',this.context.textAlign="center",this.context.textBaseline="middle",this.context.fillText("PAUSE",this.width/2,this.height/2-48),this.context.fillText("Press ENTER to Resume",this.width/2,this.height/2)}},{key:"renderEndScreen",value:function(t){var e=t.score;this._clearScreen(),this.context.fillStyle="white",this.context.font='18px "Press Start 2P"',this.context.textAlign="center",this.context.textBaseline="middle",this.context.fillText("GAME OVER",this.width/2,this.height/2-48),this.context.fillText("Score: ".concat(e),this.width/2,this.height/2),this.context.fillText("Press ENTER to Restart",this.width/2,this.height/2+48)}},{key:"_clearScreen",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"black";this.context.fillStyle=t,this.context.fillRect(0,0,this.width,this.height)}},{key:"_renderBorder",value:function(){this.context.strokeStyle="white",this.context.lineWidth=this.playfieldBorderWidth,this.context.strokeRect(0,0,this.playfieldWidth,this.playfieldHeight)}},{key:"_renderPlayfield",value:function(t){for(var i=t.playfield,r=t.activePiece,n=0;n<i.length;n++)for(var o=i[n],s=0;s<o.length;s++){var a=i[n][s];a&&this._renderBlock({x:this.playfieldX+s*this.blockWidth,y:this.playfieldY+n*this.blockHeight,width:this.blockWidth,height:this.blockHeight,color:e.colors[a.type]})}this._renderPiece(r,{x:this.playfieldX,y:this.playfieldY,width:this.blockWidth,height:this.blockHeight})}},{key:"_renderPanel",value:function(t){var e=t.level,i=t.score,r=t.lines,n=t.nextPiece;this.context.textAlign="start",this.context.textBaseline="top",this.context.fillStyle="white",this.context.font='14px "Press Start 2P"',this.context.fillText("Level: ".concat(e),this.panelX,this.panelY+0),this.context.fillText("Score: ".concat(i),this.panelX,this.panelY+24),this.context.fillText("Lines: ".concat(r),this.panelX,this.panelY+48),this.context.fillText("Next:",this.panelX,this.panelY+96),this._renderPiece(n,{x:this.panelX,y:this.panelY+120,width:.5*this.blockWidth,height:.5*this.blockHeight})}},{key:"_renderPiece",value:function(t,i){var r=i.x,n=i.y,o=i.width,s=void 0===o?this.blockWidth:o,a=i.height,l=void 0===a?this.blockHeight:a,c=!0,u=!1,h=void 0;try{for(var f,d=t[Symbol.iterator]();!(c=(f=d.next()).done);c=!0){var y=f.value;y&&this._renderBlock({x:r+y.x*s,y:n+y.y*l,width:s,height:l,color:e.colors[y.type]})}}catch(t){u=!0,h=t}finally{try{c||null==d.return||d.return()}finally{if(u)throw h}}}},{key:"_renderBlock",value:function(t){var e=t.x,i=t.y,r=t.width,n=t.height,o=t.lineWidth,s=void 0===o?2:o,a=t.color,l=void 0===a?"black":a;this.context.fillStyle=l,this.context.strokeStyle="black",this.context.lineWidth=s,this.context.fillRect(e,i,r,n),this.context.strokeRect(e,i,r,n)}}]),e}();t(l)(R,"colors",{I:"cyan",J:"blue",L:"orange",O:"yellow",S:"green",T:"purple",Z:"red"});var M=function(){"use strict";function e(i,r){t(o)(this,e),this._game=i,this._view=r,this._isPlaying=!1,this._interval=null,this.update=this.update.bind(this),r.on("keypress",this._handleKeyPress.bind(this)),r.on("keydown",this._handleKeyDown.bind(this)),r.on("keyup",this._handleKeyUp.bind(this)),this._view.renderStartScreen()}return t(s)(e,[{key:"update",value:function(){this._game.movePieceDown(),this._updateView()}},{key:"play",value:function(){this._isPlaying=!0,this._startTimer(),this._updateView()}},{key:"pause",value:function(){this._isPlaying=!1,this._stopTimer(),this._updateView()}},{key:"reset",value:function(){this._game.reset(),this.play()}},{key:"_updateView",value:function(){var t=this._game.state;t.isGameOver?this._view.renderEndScreen(t):this._isPlaying?this._view.renderMainScreen(t):this._view.renderPauseScreen(t)}},{key:"_startTimer",value:function(){var t=this,e=1e3-100*this._game.level;this._interval||(this._interval=setInterval((function(){t.update()}),e>0?e:100))}},{key:"_stopTimer",value:function(){this._interval&&(clearInterval(this._interval),this._interval=null)}},{key:"_handleKeyPress",value:function(t){if(13===t.keyCode)this._game.state.isGameOver?(console.log(this._game.state),this.reset()):this._isPlaying?this.pause():this.play()}},{key:"_handleKeyDown",value:function(t){switch(t.keyCode){case 37:this._isPlaying&&this._game.movePieceLeft(),this._updateView();break;case 38:this._game.rotatePiece(),this._updateView();break;case 39:this._game.movePieceRight(),this._updateView();break;case 40:this._stopTimer(),this._game.movePieceDown(),this._updateView()}}},{key:"_handleKeyUp",value:function(t){if(40===t.keyCode)this._startTimer()}}]),e}(),W=document.querySelector("#root");new M(new j(20,10),new R({element:W,width:480,height:640,rows:20,columns:10}))}();
//# sourceMappingURL=index.f2b63e2a.js.map
