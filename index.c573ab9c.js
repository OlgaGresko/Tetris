function e(e){return e&&e.__esModule?e.default:e}var t={};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i;return e};const i=document.querySelector("#root"),l=new class{getState(){const e=this.createPlayfield(),{y:t,x:i,blocks:l}=this.activePiece;for(let t=0;t<this.playfield.length;t++){e[t]=[];for(let i=0;i<this.playfield[t].length;i++)e[t][i]=this.playfield[t][i]}for(let s=0;s<l.length;s++)for(let c=0;c<l[s].length;c++)l[s][c]&&(e[t+s][i+c]=l[s][c]);return{playfield:e}}createPlayfield(){const e=[];for(let t=0;t<20;t++){e[t]=[];for(let i=0;i<10;i++)e[t][i]=0}return e}movePieceLeft(){this.activePiece.x-=1,this.hasCollision()&&(this.activePiece.x+=1)}movePieceRight(){this.activePiece.x+=1,this.hasCollision()&&(this.activePiece.x-=1)}movePieceDown(){this.activePiece.y+=1,this.hasCollision()&&(this.activePiece.y-=1,this.lockPiece())}rotatePiece(){this.rotateBlocks(),this.hasCollision()&&this.rotateBlocks(!1)}rotateBlocks(e=!0){const t=this.activePiece.blocks,i=t.length,l=Math.floor(i/2),s=i-1;for(let i=0;i<l;i++)for(let l=i;l<s-i;l++){const c=t[i][l];e?(t[i][l]=t[s-l][i],t[s-l][i]=t[s-i][s-l],t[s-i][s-l]=t[l][s-i],t[l][s-i]=c):(t[i][l]=t[l][s-i],t[l][s-i]=t[s-i][s-l],t[s-i][s-l]=t[s-l][i],t[s-l][i]=c)}}hasCollision(){const{y:e,x:t,blocks:i}=this.activePiece;for(let l=0;l<i.length;l++)for(let s=0;s<i.length;s++)if(i[l][s]&&(void 0===this.playfield[e+l]||void 0===this.playfield[e+l][t+s]||this.playfield[e+l][t+s]))return!0;return!1}lockPiece(){const{y:e,x:t,blocks:i}=this.activePiece;for(let l=0;l<i.length;l++)for(let s=0;s<i.length;s++)i[l][s]&&(this.playfield[e+l][t+s]=i[l][s])}constructor(){e(t)(this,"score",0),e(t)(this,"lines",0),e(t)(this,"level",0),e(t)(this,"playfield",this.createPlayfield()),e(t)(this,"activePiece",{x:0,y:0,blocks:[[0,1,0],[1,1,1],[0,0,0]]})}},s=new class{render({playfield:e}){this.clearScreen(),this.renderPlayfield(e)}clearScreen(){this.context.clearRect(0,0,this.width,this.height)}renderPlayfield(e){for(let t=0;t<e.length;t++){const i=e[t];for(let e=0;e<i.length;e++){i[e]&&this.renderBlock(e*this.blockWidth,t*this.blockHeight,this.blockWidth,this.blockHeight,"red")}}}renderBlock(e,t,i,l,s){this.context.fillStyle=s,this.context.strokeStyle="black",this.context.lineWidth=2,this.context.fillRect(e,t,i,l),this.context.strokeRect(e,t,i,l)}constructor(e,t,i,l,s){this.element=e,this.width=t,this.height=i,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.context=this.canvas.getContext("2d"),this.blockWidth=this.width/s,this.blockHeight=this.height/l,this.element.appendChild(this.canvas)}}(i,320,640,20,10);window.game=l,window.view=s,document.addEventListener("keydown",(e=>{switch(e.keyCode){case 37:l.movePieceLeft(),s.render(l.getState());break;case 38:l.rotatePiece(),s.render(l.getState());break;case 39:l.movePieceRight(),s.render(l.getState());break;case 40:l.movePieceDown(),s.render(l.getState())}}));
//# sourceMappingURL=index.c573ab9c.js.map
