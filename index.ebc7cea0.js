!function(){function e(e){return e&&e.__esModule?e.default:e}var t={};Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")};var i={};function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}Object.defineProperty(i,"__esModule",{value:!0}),i.default=function(e,t,i){t&&n(e.prototype,t);i&&n(e,i);return e};var a={};Object.defineProperty(a,"__esModule",{value:!0}),a.default=function(e,t,i){t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i;return e};var l=function(){"use strict";function n(){e(t)(this,n),e(a)(this,"score",0),e(a)(this,"lines",0),e(a)(this,"level",0),e(a)(this,"playfield",this.createPlayfield()),e(a)(this,"activePiece",{x:0,y:0,blocks:[[0,1,0],[1,1,1],[0,0,0]]})}return e(i)(n,[{key:"getState",value:function(){for(var e=this.createPlayfield(),t=this.activePiece,i=t.y,n=t.x,a=t.blocks,l=0;l<this.playfield.length;l++){e[l]=[];for(var o=0;o<this.playfield[l].length;o++)e[l][o]=this.playfield[l][o]}for(var c=0;c<a.length;c++)for(var r=0;r<a[c].length;r++)a[c][r]&&(e[i+c][n+r]=a[c][r]);return{playfield:e}}},{key:"createPlayfield",value:function(){for(var e=[],t=0;t<20;t++){e[t]=[];for(var i=0;i<10;i++)e[t][i]=0}return e}},{key:"movePieceLeft",value:function(){this.activePiece.x-=1,this.hasCollision()&&(this.activePiece.x+=1)}},{key:"movePieceRight",value:function(){this.activePiece.x+=1,this.hasCollision()&&(this.activePiece.x-=1)}},{key:"movePieceDown",value:function(){this.activePiece.y+=1,this.hasCollision()&&(this.activePiece.y-=1,this.lockPiece())}},{key:"rotatePiece",value:function(){this.rotateBlocks(),this.hasCollision()&&this.rotateBlocks(!1)}},{key:"rotateBlocks",value:function(){for(var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.activePiece.blocks,i=t.length,n=Math.floor(i/2),a=i-1,l=0;l<n;l++)for(var o=l;o<a-l;o++){var c=t[l][o];e?(t[l][o]=t[a-o][l],t[a-o][l]=t[a-l][a-o],t[a-l][a-o]=t[o][a-l],t[o][a-l]=c):(t[l][o]=t[o][a-l],t[o][a-l]=t[a-l][a-o],t[a-l][a-o]=t[a-o][l],t[a-o][l]=c)}}},{key:"hasCollision",value:function(){for(var e=this.activePiece,t=e.y,i=e.x,n=e.blocks,a=0;a<n.length;a++)for(var l=0;l<n.length;l++)if(n[a][l]&&(void 0===this.playfield[t+a]||void 0===this.playfield[t+a][i+l]||this.playfield[t+a][i+l]))return!0;return!1}},{key:"lockPiece",value:function(){for(var e=this.activePiece,t=e.y,i=e.x,n=e.blocks,a=0;a<n.length;a++)for(var l=0;l<n.length;l++)n[a][l]&&(this.playfield[t+a][i+l]=n[a][l])}}]),n}(),o=function(){"use strict";function n(i,a,l,o,c){e(t)(this,n),this.element=i,this.width=a,this.height=l,this.canvas=document.createElement("canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.context=this.canvas.getContext("2d"),this.blockWidth=this.width/c,this.blockHeight=this.height/o,this.element.appendChild(this.canvas)}return e(i)(n,[{key:"render",value:function(e){var t=e.playfield;this.clearScreen(),this.renderPlayfield(t)}},{key:"clearScreen",value:function(){this.context.clearRect(0,0,this.width,this.height)}},{key:"renderPlayfield",value:function(e){for(var t=0;t<e.length;t++)for(var i=e[t],n=0;n<i.length;n++){i[n]&&this.renderBlock(n*this.blockWidth,t*this.blockHeight,this.blockWidth,this.blockHeight,"red")}}},{key:"renderBlock",value:function(e,t,i,n,a){this.context.fillStyle=a,this.context.strokeStyle="black",this.context.lineWidth=2,this.context.fillRect(e,t,i,n),this.context.strokeRect(e,t,i,n)}}]),n}(),c=document.querySelector("#root"),r=new l,h=new o(c,320,640,20,10);window.game=r,window.view=h,document.addEventListener("keydown",(function(e){switch(e.keyCode){case 37:r.movePieceLeft(),h.render(r.getState());break;case 38:r.rotatePiece(),h.render(r.getState());break;case 39:r.movePieceRight(),h.render(r.getState());break;case 40:r.movePieceDown(),h.render(r.getState())}}))}();
//# sourceMappingURL=index.ebc7cea0.js.map
