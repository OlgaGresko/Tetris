{"mappings":"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","sources":["node_modules/@swc/helpers/lib/_class_call_check.js","node_modules/@swc/helpers/lib/_create_class.js","node_modules/@swc/helpers/lib/_define_property.js","src/game.js","<<jsx-config-pragma.js>>","src/view.js","src/index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _classCallCheck;\nfunction _classCallCheck(instance, Constructor) {\n    if (!(instance instanceof Constructor)) {\n        throw new TypeError(\"Cannot call a class as a function\");\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _createClass;\nfunction _createClass(Constructor, protoProps, staticProps) {\n    if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n    if (staticProps) _defineProperties(Constructor, staticProps);\n    return Constructor;\n}\nfunction _defineProperties(target, props) {\n    for(var i = 0; i < props.length; i++){\n        var descriptor = props[i];\n        descriptor.enumerable = descriptor.enumerable || false;\n        descriptor.configurable = true;\n        if (\"value\" in descriptor) descriptor.writable = true;\n        Object.defineProperty(target, descriptor.key, descriptor);\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.default = _defineProperty;\nfunction _defineProperty(obj, key, value) {\n    if (key in obj) {\n        Object.defineProperty(obj, key, {\n            value: value,\n            enumerable: true,\n            configurable: true,\n            writable: true\n        });\n    } else {\n        obj[key] = value;\n    }\n    return obj;\n}\n","export default class Game {\n  score = 0;\n  lines = 0;\n  level = 0;\n  playfield = [\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n    [0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n  ];\n  activePiece = {\n    x: 0,\n    y: 0,\n    blocks: [\n      [0, 1, 0],\n      [1, 1, 1],\n      [0, 0, 0],\n    ],\n  };\n\n  movePieceLeft() {\n    this.activePiece.x -= 1;\n\n    if (this.hasCollision()) {\n      this.activePiece.x += 1;\n    }\n  }\n\n  movePieceRight() {\n    this.activePiece.x += 1;\n\n    if (this.hasCollision()) {\n      this.activePiece.x -= 1;\n    }\n  }\n\n  movePieceDown() {\n    this.activePiece.y += 1;\n\n    if (this.hasCollision()) {\n      this.activePiece.y -= 1;\n      this.lockPiece();\n    }\n  }\n\n  rotatePiece() {\n    this.rotateBlocks();\n\n    if (this.hasCollision()) {\n      this.rotateBlocks(false);\n    }\n  }\n\n  rotateBlocks(clockwise = true) {\n    const blocks = this.activePiece.blocks;\n    const length = blocks.length;\n    const x = Math.floor(length / 2);\n    const y = length - 1;\n\n    for (let i = 0; i < x; i++) {\n      for (let j = i; j < y - i; j++) {\n        const temp = blocks[i][j];\n\n        if (clockwise) {\n          blocks[i][j] = blocks[y - j][i];\n          blocks[y - j][i] = blocks[y - i][y - j];\n          blocks[y - i][y - j] = blocks[j][y - i];\n          blocks[j][y - i] = temp;\n        } else {\n          blocks[i][j] = blocks[j][y - i];\n          blocks[j][y - i] = blocks[y - i][y - j];\n          blocks[y - i][y - j] = blocks[y - j][i];\n          blocks[y - j][i] = temp;\n        }\n      }\n    }\n  }\n\n  hasCollision() {\n    const { y: pieceY, x: pieceX, blocks } = this.activePiece;\n\n    for (let y = 0; y < blocks.length; y++) {\n      for (let x = 0; x < blocks.length; x++) {\n        if (\n          blocks[y][x] &&\n          (this.playfield[pieceY + y] === undefined ||\n            this.playfield[pieceY + y][pieceX + x] === undefined ||\n            this.playfield[pieceY + y][pieceX + x])\n        ) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n\n  lockPiece() {\n    const { y: pieceY, x: pieceX, blocks } = this.activePiece;\n\n    for (let y = 0; y < blocks.length; y++) {\n      for (let x = 0; x < blocks.length; x++) {\n        if (blocks[y][x]) {\n          this.playfield[pieceY + y][pieceX + x] = blocks[y][x];\n        }\n      }\n    }\n  }\n}\n",null,"export default class View {\n    constructor(element, width, height, rows, columns) {\n        this.element = element;\n        this.width = width;\n        this.height = height;\n\n        this.canvas = document.createElement(\"canvas\");\n        this.canvas.width = this.width;\n        this.canvas.height = this.height;\n        this.context = this.canvas.getContext(\"2d\");\n\n        this.blockWidth = this.width / columns;\n        this.blockHeight = this.height / rows;\n\n        this.element.appendChild(this.canvas);\n    }\n\n    renderPlayfield(playfield) {\n        for (let y = 0; y < playfield.length; y++) {\n            const line = playfield[y];\n\n            for (let x = 0; x < line.length; x++) {\n                const block = line[x];\n\n                if (block) {\n                    this.context.fillStyle = \"red\";\n                    this.context.strokeStyle = \"black\";\n                    this.context.lineWidth = 2;\n\n                    this.context.fillRect(x * this.blockWidth, y * this.blockHeight, this.blockWidth, this.blockHeight);\n                }\n            }\n            \n        }\n    }\n}","import Game from \"./game\";\nimport View from \"./view\";\n\nconst root = document.querySelector(\"#root\");\n\nconst game = new Game();\nconst view = new View(root, 320, 640, 20, 10);\n\n\nwindow.game = game;\nwindow.view = view;\n\nview.renderPlayfield(game.playfield)"],"names":["Object","defineProperty","$665014edacbfe17b$exports","value","default","instance","Constructor","TypeError","$74e7f8130373505f$var$_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","$74e7f8130373505f$exports","protoProps","staticProps","prototype","$cec85eba0a352189$exports","obj","$99d08c4d6b37c7ca$export$2e2bcd8739ae039","Game","$parcel$interopDefault","this","x","y","blocks","activePiece","hasCollision","lockPiece","rotateBlocks","clockwise","arguments","Math","floor","j","temp","_activePiece","pieceY","pieceX","undefined","playfield","$5d49d22315d62564$export$2e2bcd8739ae039","View","element","width","height","rows","columns","canvas","document","createElement","context","getContext","blockWidth","blockHeight","appendChild","line","fillStyle","strokeStyle","lineWidth","fillRect","$b8f9b7833fa37166$var$root","querySelector","$b8f9b7833fa37166$var$game","$b8f9b7833fa37166$var$view","window","game","view","renderPlayfield"],"version":3,"file":"index.989462ca.js.map"}